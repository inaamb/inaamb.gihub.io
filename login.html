<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | FarmConnect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-success" href="index.html">
                <i class="fas fa-leaf me-2"></i>FarmConnect
            </a>
        </div>
    </nav>

    <!-- Login/Signup Form -->
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body p-4">
                        <h2 class="text-center mb-4" id="formTitle">Sign In to FarmConnect</h2>
                        
                        <ul class="nav nav-tabs mb-4" id="authTabs">
                            <li class="nav-item w-50 text-center">
                                <button class="nav-link active w-100" onclick="showLogin()">Sign In</button>
                            </li>
                            <li class="nav-item w-50 text-center">
                                <button class="nav-link w-100" onclick="showSignup()">Sign Up</button>
                            </li>
                        </ul>

                        <!-- Login Form -->
                        <form id="loginForm" style="display: block;">
                            <div class="mb-3">
                                <label class="form-label">Email Address</label>
                                <input type="email" class="form-control" placeholder="Enter your email" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <input type="password" class="form-control" placeholder="Enter your password" required>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="rememberMe">
                                <label class="form-check-label" for="rememberMe">Remember me</label>
                            </div>
                            <button type="submit" class="btn btn-success w-100 btn-lg">Sign In</button>
                            <p class="text-center mt-3">
                                <a href="#" onclick="showSignup()">Don't have an account? Sign up</a>
                            </p>
                        </form>

                        <!-- Signup Form -->
                        <form id="signupForm" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label">I am a:</label>
                                <div class="d-flex gap-3 mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="userType" id="farmerType" value="farmer" checked>
                                        <label class="form-check-label" for="farmerType">
                                            <i class="fas fa-tractor me-1"></i>Farmer
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="userType" id="buyerType" value="buyer">
                                        <label class="form-check-label" for="buyerType">
                                            <i class="fas fa-shopping-basket me-1"></i>Buyer
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" placeholder="Enter your name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" placeholder="Enter your email" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" placeholder="Enter phone number" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Location</label>
                                    <input type="text" class="form-control" placeholder="City/Region" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <input type="password" class="form-control" placeholder="Create a password" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" placeholder="Confirm password" required>
                            </div>
                            
                            <!-- Farmer Specific Fields -->
                            <div id="farmerFields" style="display: block;">
                                <div class="mb-3">
                                    <label class="form-label">Farm Name</label>
                                    <input type="text" class="form-control" placeholder="Enter farm name" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Farm Type</label>
                                    <select class="form-select" required>
                                        <option value="">Select farm type</option>
                                        <option>Crop Farming</option>
                                        <option>Livestock</option>
                                        <option>Mixed Farming</option>
                                        <option>Orchard</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Buyer Specific Fields -->
                            <div id="buyerFields" style="display: none;">
                                <div class="mb-3">
                                    <label class="form-label">Dietary Preferences</label>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="vegetarian">
                                                <label class="form-check-label" for="vegetarian">Vegetarian</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="glutenFree">
                                                <label class="form-check-label" for="glutenFree">Gluten-Free</label>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="vegan">
                                                <label class="form-check-label" for="vegan">Vegan</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="dairyFree">
                                                <label class="form-check-label" for="dairyFree">Dairy-Free</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-success w-100 btn-lg">Create Account</button>
                            <p class="text-center mt-3">
                                <a href="#" onclick="showLogin()">Already have an account? Sign in</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const role = urlParams.get('role');
        const tab = urlParams.get('tab');
        
        if (role === 'farmer') {
            document.getElementById('farmerType').checked = true;
            showUserTypeFields('farmer');
        } else if (role === 'buyer') {
            document.getElementById('buyerType').checked = true;
            showUserTypeFields('buyer');
        }
        
        if (tab === 'signup') {
            showSignup();
        }

        // User type selection
        document.getElementById('farmerType').addEventListener('change', function() {
            if (this.checked) showUserTypeFields('farmer');
        });
        
        document.getElementById('buyerType').addEventListener('change', function() {
            if (this.checked) showUserTypeFields('buyer');
        });

        // Form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            localStorage.setItem('userEmail', email);
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userType', 'farmer'); // Default to farmer for demo
            window.location.href = 'farmer-dashboard.html';
        });

        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const userType = document.querySelector('input[name="userType"]:checked').value;
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userType', userType);
            if (userType === 'farmer') {
                window.location.href = 'farmer-dashboard.html';
            } else {
                window.location.href = 'buyer-marketplace.html';
            }
        });

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('formTitle').textContent = 'Sign In to FarmConnect';
            document.querySelector('#authTabs .nav-link.active').classList.remove('active');
            document.querySelector('#authTabs .nav-link:first-child').classList.add('active');
        }

        function showSignup() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
            document.getElementById('formTitle').textContent = 'Create New Account';
            document.querySelector('#authTabs .nav-link.active').classList.remove('active');
            document.querySelector('#authTabs .nav-link:last-child').classList.add('active');
        }

        function showUserTypeFields(type) {
            if (type === 'farmer') {
                document.getElementById('farmerFields').style.display = 'block';
                document.getElementById('buyerFields').style.display = 'none';
            } else {
                document.getElementById('farmerFields').style.display = 'none';
                document.getElementById('buyerFields').style.display = 'block';
            }
        }
    </script>
</body>
</html>